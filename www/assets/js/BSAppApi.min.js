!function(e){if(!e.$bsAppApi){var t={},s="bsscan";t.scan=function(e){var n=t.getSessionItem(s);n&&"0"==n.start&&(n.start="1",n.end="0",t.setSessionItem(s,n)),t.monitor(s,e,1e3)},t.getSessionItem=function(e){if(!("string"==typeof e&&e.length>0))var e="bsappapi";var t=sessionStorage.getItem(e);return t?JSON.parse(unescape(t)):t},t.setSessionItem=function(e,t){if("string"==typeof e&&e.length>0&&t&&"object"==typeof t){var t=escape(JSON.stringify(t));sessionStorage.setItem(e,t)}},t.monitor=function(e,s,n){if(!n)var n=1e3;var r=setInterval(function(){var n=t.getSessionItem(e);if(!n)return s({},{msg:e+" is not exit~"}),void clearInterval(r);"0"!=n.end&&(n.end="0",n.start="0",t.setSessionItem(e,n),s&&s(n.result,n.error),clearInterval(r))},n)},function(){var e={start:"0",end:"0",result:{},error:{}};t.setSessionItem(s,e)}(),e.$bsAppApi=t}}(this);
